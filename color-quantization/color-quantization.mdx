---
title: 'Color Quantization'
date: '2024-05-20'
tags: ['clustering']
---

To inaugurate this blog, I'd like to present a simple article involving a topic I've spent
many months studying: **clustering**. While the application to color quantization is
straightforward, I think it will be a nice showcase of the code styling and data 
visualization features at my disposal.

Let's inspect the following image:

```typescript title="typescript"
<Image filePath=''>
```

If you were asked to list the prominent colors in this image, how would you respond?
At a minimum, I would identify:

1. Green (background foliage)
2. Light Violet (flower petals)
3. Yellow (flower centers)

Fundamentally, this image is an array of pixels. The color of each pixel is described by
a combination of three integers, each in the range 0-255. You may know this as **RGB**
color encoding. Pure black is encoded as *(0,0,0)* and pure white as *(255,255,255)*.

Knowing this, we can count the number of unique colors in this image by counting the
number of unique RGB triplets:

```python title="python"
import requests
from PIL import Image
from io import BytesIO
import numpy as np

url = 'https://upload.wikimedia.org/wikipedia/commons/f/f2/Brachyscome_iberidifolia_Toucan_Tango_2zz.jpg'
response = requests.get(url)
image = Image.open(BytesIO(response.content))
image = image.convert('RGB')

image_array = np.array(image)
image_array_flat = image_array.flatten().reshape((
    image_array.shape[0] * image_array.shape[1],
    3
))

view = image_array_flat.view((
    np.void,
    image_array_flat.dtype.itemsize * image_array_flat.shape[1]
))
num_colors = len(np.unique(view))

print(image_array_flat.shape, num_colors)
```

This identifies **665,000** pixels with **141,862** unique colors!

<LazyPlot filePath='color-quantization/plotly_fig.json'/>